{"ast":null,"code":"import _objectSpread from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _defineProperty from\"C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";var _templateObject,_templateObject2,_templateObject3;/* eslint-disable react-hooks/exhaustive-deps */import React,{useState,useEffect,useContext}from'react';import{styled,Box,TextareaAutosize,Button,InputBase,FormControl}from'@mui/material';import{AddCircle as Add}from'@mui/icons-material';import{useNavigate,useLocation}from'react-router-dom';import{API}from'../../service/api';import{DataContext}from'../../context/DataProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled(Box)(function(_ref){var theme=_ref.theme;return _defineProperty({margin:'0px 100px',height:'100%',minHeight:'100vh'},theme.breakpoints.down('md'),{margin:0});});var Image=styled('img')({width:'100%',height:'60vh',objectFit:'cover',borderRadius:'10px'});var StyledFormControl=styled(FormControl)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-top: 10px;\\n    display: flex;\\n    flex-direction: row;\\n\"])));var InputTextField=styled(InputBase)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    flex: 1;\\n    margin: 0 30px;\\n    font-size: 25px;\\n\"])));var Textarea=styled(TextareaAutosize)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nwidth: calc(100% - 60px);\\npadding: 30px;\\nbackground: #ffffff1c;\\nbox-shadow: 0px 0px 10px #00000050;\\nborder-radius: 25px;\\noverflow: auto !important;\\nheight: calc(100vh - 140px) !important;\\nfilter: drop-shadow(2px 4px 6px #00000050);\\nborder: 1px solid #00000050;\\nmargin-top: 50px;\\nfont-size: 18px;\\n    &:focus-visible {\\n        outline: none;\\n    }\\n\"])));var initialPost={title:'',description:'',picture:'',username:'',categories:'',createdDate:new Date()};var CreatePost=function CreatePost(){var navigate=useNavigate();var location=useLocation();var _useState=useState(initialPost),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useContext=useContext(DataContext),account=_useContext.account;var url=post.picture?post.picture:'https://res.cloudinary.com/dhbyg08yc/image/upload/v1685015449/photo_placeholder_landscape_0_xga5uf.jpg';useEffect(function(){var _location$search;var getImage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!file){_context.next=8;break;}data=new FormData();data.append(\"name\",file.name);data.append(\"file\",file);_context.next=6;return API.uploadFile(data);case 6:response=_context.sent;post.picture=response.data;case 8:case\"end\":return _context.stop();}}},_callee);}));return function getImage(){return _ref3.apply(this,arguments);};}();getImage();post.categories=((_location$search=location.search)===null||_location$search===void 0?void 0:_location$search.split('=')[1])||'All';post.username=account.username;},[file]);var savePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.createPost(post);case 2:navigate('/');case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function savePost(){return _ref4.apply(this,arguments);};}();var handleChange=function handleChange(e){setPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-detail\",style:{justifyContent:'flex-start'},children:[/*#__PURE__*/_jsx(Image,{src:url,alt:\"post\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",className:\"flag\",children:/*#__PURE__*/_jsx(Add,{style:{color:'#000000 !important'},fontSize:\"large\",color:\"action\"})}),/*#__PURE__*/_jsxs(StyledFormControl,{className:\"shadow\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(InputTextField,{className:\"shadow\",style:{filter:'none'},onChange:function onChange(e){return handleChange(e);},name:\"title\",placeholder:\"Title\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return savePost();},className:\"button-86\",style:{padding:'30px',filter:'none !important'},children:\"Publish\"})]})]}),/*#__PURE__*/_jsx(Textarea,{rowsMin:5,placeholder:\"Tell your story...\",name:\"description\",onChange:function onChange(e){return handleChange(e);}})]});};export default CreatePost;","map":{"version":3,"names":["React","useState","useEffect","useContext","styled","Box","TextareaAutosize","Button","InputBase","FormControl","AddCircle","Add","useNavigate","useLocation","API","DataContext","jsx","_jsx","jsxs","_jsxs","Container","_ref","theme","_defineProperty","margin","height","minHeight","breakpoints","down","Image","width","objectFit","borderRadius","StyledFormControl","_templateObject","_taggedTemplateLiteral","InputTextField","_templateObject2","Textarea","_templateObject3","initialPost","title","description","picture","username","categories","createdDate","Date","CreatePost","navigate","location","_useState","_useState2","_slicedToArray","post","setPost","_useState3","_useState4","file","setFile","_useContext","account","url","_location$search","getImage","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","response","wrap","_callee$","_context","prev","next","FormData","append","name","uploadFile","sent","stop","apply","arguments","search","split","savePost","_ref4","_callee2","_callee2$","_context2","createPost","handleChange","e","_objectSpread","target","value","children","className","style","justifyContent","src","alt","htmlFor","color","fontSize","type","id","display","onChange","files","filter","placeholder","onClick","padding","rowsMin"],"sources":["C:/Users/ANKUR KUMAR/Videos/AIVLOG-main/client/src/components/create/CreatePost.jsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect, useContext } from 'react';\r\n\r\nimport { styled, Box, TextareaAutosize, Button, InputBase, FormControl  } from '@mui/material';\r\nimport { AddCircle as Add } from '@mui/icons-material';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nimport { API } from '../../service/api';\r\nimport { DataContext } from '../../context/DataProvider';\r\n\r\nconst Container = styled(Box)(({ theme }) => ({\r\n    margin: '0px 100px',\r\n    height:'100%',\r\n    minHeight: '100vh',\r\n    [theme.breakpoints.down('md')]: {\r\n        margin: 0\r\n    }\r\n}));\r\n\r\nconst Image = styled('img')({\r\n    width: '100%',\r\n    height: '60vh',\r\n    objectFit: 'cover',\r\n    borderRadius:'10px',\r\n});\r\n\r\nconst StyledFormControl = styled(FormControl)`\r\n    margin-top: 10px;\r\n    display: flex;\r\n    flex-direction: row;\r\n`;\r\n\r\nconst InputTextField = styled(InputBase)`\r\n    flex: 1;\r\n    margin: 0 30px;\r\n    font-size: 25px;\r\n`;\r\n\r\nconst Textarea = styled(TextareaAutosize)`\r\nwidth: calc(100% - 60px);\r\npadding: 30px;\r\nbackground: #ffffff1c;\r\nbox-shadow: 0px 0px 10px #00000050;\r\nborder-radius: 25px;\r\noverflow: auto !important;\r\nheight: calc(100vh - 140px) !important;\r\nfilter: drop-shadow(2px 4px 6px #00000050);\r\nborder: 1px solid #00000050;\r\nmargin-top: 50px;\r\nfont-size: 18px;\r\n    &:focus-visible {\r\n        outline: none;\r\n    }\r\n`;\r\n\r\nconst initialPost = {\r\n    title: '',\r\n    description: '',\r\n    picture: '',\r\n    username: '',\r\n    categories: '',\r\n    createdDate: new Date()\r\n}\r\n\r\nconst CreatePost = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const [post, setPost] = useState(initialPost);\r\n    const [file, setFile] = useState('');\r\n    const { account } = useContext(DataContext);\r\n\r\n    const url = post.picture ? post.picture : 'https://res.cloudinary.com/dhbyg08yc/image/upload/v1685015449/photo_placeholder_landscape_0_xga5uf.jpg';\r\n    \r\n    useEffect(() => {\r\n        const getImage = async () => { \r\n            if(file) {\r\n                const data = new FormData();\r\n                data.append(\"name\", file.name);\r\n                data.append(\"file\", file);\r\n                \r\n                const response = await API.uploadFile(data);\r\n                post.picture = response.data;\r\n            }\r\n        }\r\n        getImage();\r\n        post.categories = location.search?.split('=')[1] || 'All';\r\n        post.username = account.username;\r\n    }, [file])\r\n\r\n    const savePost = async () => {\r\n        await API.createPost(post);\r\n        navigate('/');\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        setPost({ ...post, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <div className=\"shadow-detail\" style={{justifyContent:'flex-start'}}>\r\n            <Image src={url} alt=\"post\" />\r\n            <label htmlFor=\"fileInput\" className='flag'>\r\n                    <Add style={{color:'#000000 !important'}} fontSize=\"large\" color=\"action\" />\r\n                </label>\r\n            <StyledFormControl className='shadow'>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"fileInput\"\r\n                    style={{ display: \"none\" }}\r\n                    onChange={(e) => setFile(e.target.files[0])}\r\n                />\r\n                <InputTextField className='shadow' style={{filter:'none'}} onChange={(e) => handleChange(e)} name='title' placeholder=\"Title\" />\r\n                <Button onClick={() => savePost()} className='button-86' style={{padding:'30px',filter:'none !important'}}>Publish</Button>\r\n            </StyledFormControl>\r\n            </div>\r\n\r\n            <Textarea\r\n                rowsMin={5}\r\n                placeholder=\"Tell your story...\"\r\n                name='description'\r\n                onChange={(e) => handleChange(e)} \r\n            />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}